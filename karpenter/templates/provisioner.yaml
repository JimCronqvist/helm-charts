apiVersion: karpenter.sh/v1alpha5
kind: Provisioner
metadata:
  name: {{ .Values.provisioner.name }}
  labels:
    {{- include "karpenter.labels" . | nindent 4 }}
spec:
  requirements:
    {{- toYaml .Values.provisioner.requirements | nindent 4 }}
  limits:
    resources:
      cpu: 1k
      memory: 1000Gi
  {{- if not .Values.provisioner.consolidationEnabled }}
  ttlSecondsAfterEmpty: {{ .Values.provisioner.ttlSecondsAfterEmpty }}
  {{- end }}
  ttlSecondsUntilExpired: {{ .Values.provisioner.ttlSecondsUntilExpired }}
  consolidation:
    enabled: {{ .Values.provisioner.consolidationEnabled }}
  providerRef:
    name: default
